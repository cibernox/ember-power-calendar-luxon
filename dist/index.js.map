{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  dependencySatisfies,\n  macroCondition,\n  importSync,\n} from '@embroider/macros';\nimport type * as LuxonNs from 'luxon';\nimport type {\n  Duration,\n  DateTime,\n  DateTimeFormatOptions,\n  DateTimeUnit,\n  DateObjectUnits,\n} from 'luxon';\nimport type {\n  NormalizeCalendarValue,\n  NormalizeMultipleActionValue,\n  NormalizeRangeActionValue,\n  PowerCalendarDay,\n} from 'ember-power-calendar/utils';\n\nconst luxon: typeof LuxonNs = (() => {\n  if (macroCondition(dependencySatisfies('luxon', '*'))) {\n    return importSync('luxon') as typeof LuxonNs;\n  } else {\n    throw new Error(\n      `ember-power-calendar-luxon was unable to detect luxon. Please add the package to your app.`,\n    );\n  }\n})();\n\n/* Sadly the day in which weeks start is not part of the Intl API, so I need to harcode them */\nconst WEEK_STARTS: {\n  [key: string]: number;\n} = {\n  af: 1,\n  ar: 6,\n  'ar-dz': 0,\n  'ar-kw': 0,\n  'ar-ly': 6,\n  'ar-ma': 6,\n  'ar-sa': 0,\n  'ar-tn': 1,\n  az: 1,\n  be: 1,\n  bg: 1,\n  bm: 1,\n  bn: 0,\n  bo: 0,\n  br: 1,\n  bs: 1,\n  ca: 1,\n  cs: 1,\n  cv: 1,\n  cy: 1,\n  da: 1,\n  de: 1,\n  'de-at': 1,\n  'de-ch': 1,\n  dv: 7,\n  el: 1,\n  en: 0,\n  'en-au': 1,\n  'en-ca': 0,\n  'en-gb': 1,\n  'en-ie': 1,\n  'en-il': 0,\n  'en-nz': 1,\n  eo: 1,\n  es: 1,\n  'es-do': 1,\n  'es-us': 0,\n  et: 1,\n  eu: 1,\n  fa: 6,\n  fi: 1,\n  fo: 1,\n  fr: 1,\n  'fr-ca': 0,\n  'fr-ch': 1,\n  fy: 1,\n  gd: 1,\n  gl: 1,\n  'gom-latn': 1,\n  gu: 0,\n  he: 0,\n  hi: 0,\n  hr: 1,\n  hu: 1,\n  'hy-am': 1,\n  id: 1,\n  is: 1,\n  it: 1,\n  ja: 0,\n  jv: 1,\n  ka: 1,\n  kk: 1,\n  km: 1,\n  kn: 0,\n  ko: 0,\n  ky: 1,\n  lb: 1,\n  lo: 0,\n  lt: 1,\n  lv: 1,\n  me: 1,\n  mi: 1,\n  mk: 1,\n  ml: 0,\n  mn: 0,\n  mr: 0,\n  ms: 1,\n  'ms-my': 1,\n  mt: 1,\n  my: 1,\n  nb: 1,\n  ne: 0,\n  nl: 1,\n  'nl-be': 1,\n  nn: 1,\n  'pa-in': 0,\n  pl: 1,\n  pt: 1,\n  'pt-br': 0,\n  ro: 1,\n  ru: 1,\n  sd: 1,\n  se: 1,\n  si: 0,\n  sk: 1,\n  sl: 1,\n  sq: 1,\n  sr: 1,\n  'sr-cyrl': 1,\n  ss: 1,\n  sv: 1,\n  sw: 1,\n  ta: 0,\n  te: 0,\n  tet: 1,\n  tg: 1,\n  th: 0,\n  'tl-ph': 1,\n  tlh: 1,\n  tr: 1,\n  tzl: 1,\n  tzm: 6,\n  'tzm-latn': 6,\n  'ug-cn': 1,\n  uk: 1,\n  ur: 1,\n  uz: 1,\n  'uz-latn': 1,\n  vi: 1,\n  yo: 1,\n  'zh-cn': 1,\n  'zh-hk': 0,\n  'zh-tw': 0,\n};\n\nfunction _getWeekdays(dayFormat: string) {\n  const result: string[] = [];\n  const formatter = new Intl.DateTimeFormat(luxon.Settings.defaultLocale, {\n    weekday: dayFormat as DateTimeFormatOptions['weekday'],\n    timeZone: 'UTC',\n  });\n  for (let i = 4; i <= 10; i++) {\n    const dt = luxon.DateTime.utc(1970, 1, i).toJSDate();\n    result.push(formatter.format(dt));\n  }\n  return result;\n}\n\nexport default {\n  add,\n  formatDate,\n  startOf,\n  endOf,\n  weekday,\n  isoWeekday,\n  getWeekdaysShort,\n  getWeekdaysMin,\n  getWeekdays,\n  isAfter,\n  isBefore,\n  isSame,\n  isBetween,\n  diff,\n  normalizeDate,\n  normalizeRangeActionValue,\n  normalizeMultipleActionValue,\n  normalizeCalendarDay,\n  withLocale,\n  normalizeCalendarValue,\n  normalizeDuration,\n  getDefaultLocale,\n  localeStartOfWeek,\n  startOfWeek,\n  endOfWeek,\n};\n\nexport function add(date: Date, quantity: number, unit: string): Date {\n  return luxon.DateTime.fromJSDate(date)\n    .plus({ [unit]: quantity })\n    .toJSDate();\n}\n\nexport function formatDate(\n  date: Date,\n  format: string,\n  locale: string | null = null,\n): string {\n  let datetime = luxon.DateTime.isDateTime(date)\n    ? date\n    : luxon.DateTime.fromJSDate(date);\n  if (locale) {\n    datetime = datetime.setLocale(locale);\n  }\n  format = format.replace('YYYY', 'yyyy');\n  format = format.replace('dddd', 'EEEE');\n  format = format.replace('ddd', 'EEE');\n  format = format.replace('DD', 'dd');\n  return datetime.toFormat(format);\n}\n\nexport function startOf(date: Date, unit: string): Date {\n  let datetime = luxon.DateTime.fromJSDate(date);\n  if (unit === 'week') {\n    const normalizedLocale = datetime?.locale?.toLowerCase() ?? '';\n    let weekday = WEEK_STARTS[normalizedLocale];\n    if (weekday === undefined) {\n      const parentLocaleStart = WEEK_STARTS[normalizedLocale.slice(0, 2)];\n      weekday = parentLocaleStart === undefined ? 0 : parentLocaleStart; // 'es-ar' defaults to 'es'\n    }\n    const values = {\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0,\n      weekday: weekday as DateObjectUnits['weekday'],\n    };\n    datetime = datetime.set(values);\n  } else {\n    datetime = datetime.startOf(unit as DateTimeUnit);\n  }\n  return datetime.toJSDate();\n}\n\nexport function endOf(date: Date, unit: string): Date {\n  return luxon.DateTime.fromJSDate(date)\n    .endOf(unit as DateTimeUnit)\n    .toJSDate();\n}\n\nexport function weekday(date: Date): number {\n  return luxon.DateTime.fromJSDate(date).weekday;\n}\n\nexport function isoWeekday(date: Date): number {\n  const dayStr =\n    luxon.DateTime.fromJSDate(date).toISOWeekDate()?.split('-')[2] ?? '';\n  return parseInt(dayStr, 10);\n}\n\nexport function getWeekdaysShort(): string[] {\n  return _getWeekdays('short');\n}\n\nexport function getWeekdaysMin(): string[] {\n  return _getWeekdays('narrow');\n}\n\nexport function getWeekdays(): string[] {\n  return _getWeekdays('long');\n}\n\nexport function isAfter(date1: Date, date2: Date): boolean {\n  return +date1 > +date2;\n}\n\nexport function isBefore(date1: Date, date2: Date): boolean {\n  return +date1 < +date2;\n}\n\nexport function isSame(date1: Date, date2: Date, unit: string): boolean {\n  const dt1 = luxon.DateTime.fromJSDate(date1);\n  const dt2 = luxon.DateTime.fromJSDate(date2);\n  return dt1.hasSame(dt2, unit as DateTimeUnit);\n}\n\nexport function isBetween(\n  date: Date,\n  start: Date,\n  end: Date,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _unit?: string,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _inclusivity?: string,\n): boolean {\n  return +start <= +date && +date <= +end;\n}\n\nexport function diff(date1: Date, date2: Date): number {\n  return luxon.DateTime.fromJSDate(date1)\n    .diff(luxon.DateTime.fromJSDate(date2))\n    .as('milliseconds');\n}\n\nexport function normalizeDate(dateOrDateTime?: unknown): Date | undefined {\n  if (dateOrDateTime instanceof Date) {\n    return dateOrDateTime;\n  } else if (luxon.DateTime.isDateTime(dateOrDateTime)) {\n    return (dateOrDateTime as DateTime).toJSDate();\n  }\n}\n\nexport function normalizeRangeActionValue(val: {\n  date: {\n    start?: Date | null;\n    end?: Date | null;\n  };\n}): NormalizeRangeActionValue {\n  return {\n    date: val.date,\n    datetime: {\n      start: val.date.start\n        ? luxon.DateTime.fromJSDate(val.date.start)\n        : val.date.start,\n      end: val.date.end\n        ? luxon.DateTime.fromJSDate(val.date.end)\n        : val.date.end,\n    },\n  };\n}\n\nexport function normalizeMultipleActionValue(val: {\n  date: Date[];\n}): NormalizeMultipleActionValue {\n  return {\n    date: val.date,\n    datetime: val.date\n      ? val.date.map((e) => luxon.DateTime.fromJSDate(e))\n      : val.date,\n  };\n}\n\nexport function normalizeCalendarDay(day: PowerCalendarDay): PowerCalendarDay {\n  day.datetime = luxon.DateTime.fromJSDate(day.date);\n  day.number = parseInt((day.datetime as DateTime).toFormat('d'), 10);\n  return day;\n}\n\nexport function withLocale(locale: string, fn: () => unknown): unknown {\n  let returnValue;\n  if (locale) {\n    const previousLocale = luxon.Settings.defaultLocale;\n    luxon.Settings.defaultLocale = locale;\n    returnValue = fn();\n    luxon.Settings.defaultLocale = previousLocale;\n  } else {\n    returnValue = fn();\n  }\n  return returnValue;\n}\n\nexport function normalizeCalendarValue(value: {\n  date: Date;\n}): NormalizeCalendarValue {\n  if (value) {\n    return {\n      date: value.date,\n      datetime: value.date ? luxon.DateTime.fromJSDate(value.date) : undefined,\n    };\n  }\n  return { date: undefined, datetime: undefined };\n}\n\nconst DURATION_UNITS: {\n  [key: string]: string;\n} = {\n  y: 'years',\n  M: 'months',\n  w: 'weeks',\n  d: 'days',\n  h: 'hours',\n  m: 'minutes',\n  s: 'seconds',\n};\n\nexport function normalizeDuration(value: unknown): number | null | undefined {\n  if (value === null) {\n    return null;\n  }\n  if (value instanceof luxon.Duration) {\n    return (value as Duration).valueOf();\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'string') {\n    const matches = value.match(/(\\d+)(.*)/) ?? [];\n    const quantity = matches[1] ?? '';\n    let units = matches[2]?.trim() || 'days';\n    units = DURATION_UNITS[units] || units;\n    const duration = luxon.Duration.fromObject({\n      [units]: parseInt(quantity, 10),\n    });\n    return duration.valueOf();\n  }\n}\n\nexport function getDefaultLocale(): string {\n  return (\n    luxon.Settings.defaultLocale ||\n    luxon.DateTime.local().resolvedLocaleOptions().locale\n  );\n}\n\nexport function localeStartOfWeek(locale: string): number {\n  const now = new Date();\n  const day = withLocale(locale, () =>\n    formatDate(startOf(now, 'week'), 'dddd'),\n  ) as string;\n  const idx = (withLocale(locale, getWeekdays) as string[]).indexOf(day);\n  return idx >= 0 ? idx : 0;\n}\n\nexport function startOfWeek(day: Date, startOfWeek: number): Date {\n  while (isoWeekday(day) % 7 !== startOfWeek) {\n    day = add(day, -1, 'day');\n  }\n  return day;\n}\n\nexport function endOfWeek(day: Date, startOfWeek: number): Date {\n  const eow = (startOfWeek + 6) % 7;\n  while (isoWeekday(day) % 7 !== eow) {\n    day = add(day, 1, 'day');\n  }\n  return day;\n}\n"],"names":["luxon","macroCondition","dependencySatisfies","importSync","Error","WEEK_STARTS","af","ar","az","be","bg","bm","bn","bo","br","bs","ca","cs","cv","cy","da","de","dv","el","en","eo","es","et","eu","fa","fi","fo","fr","fy","gd","gl","gu","he","hi","hr","hu","id","is","it","ja","jv","ka","kk","km","kn","ko","ky","lb","lo","lt","lv","me","mi","mk","ml","mn","mr","ms","mt","my","nb","ne","nl","nn","pl","pt","ro","ru","sd","se","si","sk","sl","sq","sr","ss","sv","sw","ta","te","tet","tg","th","tlh","tr","tzl","tzm","uk","ur","uz","vi","yo","_getWeekdays","dayFormat","result","formatter","Intl","DateTimeFormat","Settings","defaultLocale","weekday","timeZone","i","dt","DateTime","utc","toJSDate","push","format","add","formatDate","startOf","endOf","isoWeekday","getWeekdaysShort","getWeekdaysMin","getWeekdays","isAfter","isBefore","isSame","isBetween","diff","normalizeDate","normalizeRangeActionValue","normalizeMultipleActionValue","normalizeCalendarDay","withLocale","normalizeCalendarValue","normalizeDuration","getDefaultLocale","localeStartOfWeek","startOfWeek","endOfWeek","date","quantity","unit","fromJSDate","plus","locale","datetime","isDateTime","setLocale","replace","toFormat","normalizedLocale","toLowerCase","undefined","parentLocaleStart","slice","values","hour","minute","second","millisecond","set","dayStr","toISOWeekDate","split","parseInt","date1","date2","dt1","dt2","hasSame","start","end","_unit","_inclusivity","as","dateOrDateTime","Date","val","map","e","day","number","fn","returnValue","previousLocale","value","DURATION_UNITS","y","M","w","d","h","m","s","Duration","valueOf","matches","match","units","trim","duration","fromObject","local","resolvedLocaleOptions","now","idx","indexOf","eow"],"mappings":"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"}